
# Call script which publishes readings to MQTT
shell_command:
  netgear_modem_signal_run_scrape: '/config/netgear_modem_signal_scraper/netgear_signal_dump.sh'

automation:
  # Run the test on startup, and hourly
  - alias: 'Netgear Modem Signal Scrape'
    trigger:
      - platform: homeassistant
        event: start
      - platform: time_pattern
        minutes: '/5'
      - platform: state
        entity_id:
          - binary_sensor.http_cable_modem
          - binary_sensor.ping_atlanticbb_gw
        to: 'on'
#        for: '00:00:10'
      - platform: state
        entity_id:
          - binary_sensor.http_cable_modem
          - binary_sensor.ping_atlanticbb_gw
        to: 'on'
        for: '00:00:30'
      - platform: state
        entity_id:
          - binary_sensor.http_cable_modem
          - binary_sensor.ping_atlanticbb_gw
        to: 'on'
        for: '00:01:00'
      - platform: state
        entity_id:
          - binary_sensor.http_cable_modem
          - binary_sensor.ping_atlanticbb_gw
        to: 'on'
        for: '00:02:00'
      - platform: state
        entity_id:
          - binary_sensor.http_cable_modem
          - binary_sensor.ping_atlanticbb_gw
        to: 'on'
        for: '00:03:00'
      - platform: state
        entity_id: binary_sensor.ping_atlanticbb_gw
#        for: '00:00:10'
        to: 'off'
      - platform: state
        entity_id: binary_sensor.ping_atlanticbb_gw
        for: '00:00:30'
        to: 'off'
    condition:
      - condition: state
        entity_id: binary_sensor.ping_cable_modem
        state: 'on'
        for: '00:00:10'
      - condition: template
        value_template: "{{ (now() - state_attr('automation.netgear_modem_signal_scrape','last_triggered')).total_seconds() > 15 }}"
    action:
      service: shell_command.netgear_modem_signal_run_scrape



# Pull in the readings from MQTT
sensor:

  # Login Status
  - platform: mqtt
    name: "Cable Modem Web-UI Login Status"
    force_update: true
    unique_id: "modemsignals_webui_login_status"
    state_topic: "homeassistant/sensor/modemsignals/login"
    value_template: "{{ value_json.login }}"
    
  # Login Status
  - platform: mqtt
    name: "Cable Modem System Up Time"
    force_update: true
    unique_id: "modemsignals_system_up_time"
    state_topic: "homeassistant/sensor/modemsignals/system_up_time"
    value_template: "{{ value_json.SystemUpTime }}"

  # Startup Procedures
  - platform: mqtt
    name: "Cable Modem Acquire Downstream Channel"
    unique_id: "modemsignals_startup_procedure_acquiredownstreamchannel"
    state_topic: "homeassistant/sensor/modemsignals/startup_procedure/AcquireDownstreamChannel"
    value_template: "{{ value_json.comment }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/startup_procedure/AcquireDownstreamChannel"

  - platform: mqtt
    name: "Cable Modem Connectivity State"
    unique_id: "modemsignals_startup_procedure_connectivitystate"
    state_topic: "homeassistant/sensor/modemsignals/startup_procedure/ConnectivityState"
    value_template: "{{ value_json.comment }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/startup_procedure/ConnectivityState"

  - platform: mqtt
    name: "Cable Modem Boot State"
    unique_id: "modemsignals_startup_procedure_bootstate"
    state_topic: "homeassistant/sensor/modemsignals/startup_procedure/BootState"
    value_template: "{{ value_json.comment }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/startup_procedure/BootState"



# Generated sensors below
# -----------------------







  #############
  # Downstream
  #############

  # MQTT Inputs
  - platform: mqtt
    name: "Cable Modem Downstream 1 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/1"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/1"
  - platform: mqtt
    name: "Cable Modem Downstream 1 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/1"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 1 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/1"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  1 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/1"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 2 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/2"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/2"
  - platform: mqtt
    name: "Cable Modem Downstream 2 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/2"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 2 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/2"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  2 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/2"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 3 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/3"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/3"
  - platform: mqtt
    name: "Cable Modem Downstream 3 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/3"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 3 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/3"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  3 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/3"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 4 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/4"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/4"
  - platform: mqtt
    name: "Cable Modem Downstream 4 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/4"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 4 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/4"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  4 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/4"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 5 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/5"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/5"
  - platform: mqtt
    name: "Cable Modem Downstream 5 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/5"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 5 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/5"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  5 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/5"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 6 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/6"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/6"
  - platform: mqtt
    name: "Cable Modem Downstream 6 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/6"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 6 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/6"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  6 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/6"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 7 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/7"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/7"
  - platform: mqtt
    name: "Cable Modem Downstream 7 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/7"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 7 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/7"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  7 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/7"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 8 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/8"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/8"
  - platform: mqtt
    name: "Cable Modem Downstream 8 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/8"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 8 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/8"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  8 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/8"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 9 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/9"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/9"
  - platform: mqtt
    name: "Cable Modem Downstream 9 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/9"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 9 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/9"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  9 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/9"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 10 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/10"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/10"
  - platform: mqtt
    name: "Cable Modem Downstream 10 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/10"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 10 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/10"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  10 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/10"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 11 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/11"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/11"
  - platform: mqtt
    name: "Cable Modem Downstream 11 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/11"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 11 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/11"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  11 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/11"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 12 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/12"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/12"
  - platform: mqtt
    name: "Cable Modem Downstream 12 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/12"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 12 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/12"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  12 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/12"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 13 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/13"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/13"
  - platform: mqtt
    name: "Cable Modem Downstream 13 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/13"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 13 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/13"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  13 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/13"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 14 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/14"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/14"
  - platform: mqtt
    name: "Cable Modem Downstream 14 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/14"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 14 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/14"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  14 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/14"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 15 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/15"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/15"
  - platform: mqtt
    name: "Cable Modem Downstream 15 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/15"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 15 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/15"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  15 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/15"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 16 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/16"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/16"
  - platform: mqtt
    name: "Cable Modem Downstream 16 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/16"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 16 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/16"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  16 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/16"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 17 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/17"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/17"
  - platform: mqtt
    name: "Cable Modem Downstream 17 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/17"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 17 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/17"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  17 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/17"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 18 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/18"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/18"
  - platform: mqtt
    name: "Cable Modem Downstream 18 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/18"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 18 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/18"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  18 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/18"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 19 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/19"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/19"
  - platform: mqtt
    name: "Cable Modem Downstream 19 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/19"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 19 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/19"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  19 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/19"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 20 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/20"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/20"
  - platform: mqtt
    name: "Cable Modem Downstream 20 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/20"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 20 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/20"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  20 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/20"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 21 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/21"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/21"
  - platform: mqtt
    name: "Cable Modem Downstream 21 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/21"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 21 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/21"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  21 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/21"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 22 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/22"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/22"
  - platform: mqtt
    name: "Cable Modem Downstream 22 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/22"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 22 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/22"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  22 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/22"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 23 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/23"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/23"
  - platform: mqtt
    name: "Cable Modem Downstream 23 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/23"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 23 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/23"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  23 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/23"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 24 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/24"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/24"
  - platform: mqtt
    name: "Cable Modem Downstream 24 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/24"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 24 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/24"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  24 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/24"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 25 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/25"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/25"
  - platform: mqtt
    name: "Cable Modem Downstream 25 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/25"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 25 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/25"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  25 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/25"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 26 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/26"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/26"
  - platform: mqtt
    name: "Cable Modem Downstream 26 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/26"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 26 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/26"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  26 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/26"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 27 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/27"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/27"
  - platform: mqtt
    name: "Cable Modem Downstream 27 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/27"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 27 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/27"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  27 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/27"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 28 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/28"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/28"
  - platform: mqtt
    name: "Cable Modem Downstream 28 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/28"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 28 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/28"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  28 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/28"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 29 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/29"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/29"
  - platform: mqtt
    name: "Cable Modem Downstream 29 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/29"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 29 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/29"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  29 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/29"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 30 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/30"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/30"
  - platform: mqtt
    name: "Cable Modem Downstream 30 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/30"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 30 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/30"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  30 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/30"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 31 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/31"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/31"
  - platform: mqtt
    name: "Cable Modem Downstream 31 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/31"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 31 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/31"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  31 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/31"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 32 Power"
    state_topic: "homeassistant/sensor/modemsignals/downstream/32"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/downstream/32"
  - platform: mqtt
    name: "Cable Modem Downstream 32 SNR"
    state_topic: "homeassistant/sensor/modemsignals/downstream/32"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 32 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/downstream/32"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  32 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/downstream/32"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  - platform: mqtt
    name: "Cable Modem Downstream 33 Power"
    state_topic: "homeassistant/sensor/modemsignals/ofdm_downstream/1"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/ofdm_downstream/1"
  - platform: mqtt
    name: "Cable Modem Downstream 33 SNR"
    state_topic: "homeassistant/sensor/modemsignals/ofdm_downstream/1"
    unit_of_measurement: 'dB'
    value_template: "{{ value_json.SNR_MER }}"
  - platform: mqtt
    name: "Cable Modem Downstream 33 Corrected"
    state_topic: "homeassistant/sensor/modemsignals/ofdm_downstream/1"
    unit_of_measurement: 'Corrected Errors'
    value_template: "{{ value_json.Corrected }}"
  - platform: mqtt
    name: "Cable Modem Downstream  33 Uncorrectable"
    state_topic: "homeassistant/sensor/modemsignals/ofdm_downstream/1"
    unit_of_measurement: 'Uncorrectable Errors'
    value_template: "{{ value_json.Uncorrectable }}"

  # Averages
  - platform: min_max
    name: "Cable Modem Downstream Avg Power"
    type: mean
    entity_ids:
      - sensor.cable_modem_downstream_1_power
      - sensor.cable_modem_downstream_2_power
      - sensor.cable_modem_downstream_3_power
      - sensor.cable_modem_downstream_4_power
      - sensor.cable_modem_downstream_5_power
      - sensor.cable_modem_downstream_6_power
      - sensor.cable_modem_downstream_7_power
      - sensor.cable_modem_downstream_8_power
      - sensor.cable_modem_downstream_9_power
      - sensor.cable_modem_downstream_10_power
      - sensor.cable_modem_downstream_11_power
      - sensor.cable_modem_downstream_12_power
      - sensor.cable_modem_downstream_13_power
      - sensor.cable_modem_downstream_14_power
      - sensor.cable_modem_downstream_15_power
      - sensor.cable_modem_downstream_16_power
      - sensor.cable_modem_downstream_17_power
      - sensor.cable_modem_downstream_18_power
      - sensor.cable_modem_downstream_19_power
      - sensor.cable_modem_downstream_20_power
      - sensor.cable_modem_downstream_21_power
      - sensor.cable_modem_downstream_22_power
      - sensor.cable_modem_downstream_23_power
      - sensor.cable_modem_downstream_24_power
      - sensor.cable_modem_downstream_25_power
      - sensor.cable_modem_downstream_26_power
      - sensor.cable_modem_downstream_27_power
      - sensor.cable_modem_downstream_28_power
      - sensor.cable_modem_downstream_29_power
      - sensor.cable_modem_downstream_30_power
      - sensor.cable_modem_downstream_31_power
      - sensor.cable_modem_downstream_32_power
      - sensor.cable_modem_downstream_33_power
  - platform: min_max
    name: "Cable Modem Downstream Avg SNR"
    type: mean
    entity_ids:
      - sensor.cable_modem_downstream_1_snr
      - sensor.cable_modem_downstream_2_snr
      - sensor.cable_modem_downstream_3_snr
      - sensor.cable_modem_downstream_4_snr
      - sensor.cable_modem_downstream_5_snr
      - sensor.cable_modem_downstream_6_snr
      - sensor.cable_modem_downstream_7_snr
      - sensor.cable_modem_downstream_8_snr
      - sensor.cable_modem_downstream_9_snr
      - sensor.cable_modem_downstream_10_snr
      - sensor.cable_modem_downstream_11_snr
      - sensor.cable_modem_downstream_12_snr
      - sensor.cable_modem_downstream_13_snr
      - sensor.cable_modem_downstream_14_snr
      - sensor.cable_modem_downstream_15_snr
      - sensor.cable_modem_downstream_16_snr
      - sensor.cable_modem_downstream_17_snr
      - sensor.cable_modem_downstream_18_snr
      - sensor.cable_modem_downstream_19_snr
      - sensor.cable_modem_downstream_20_snr
      - sensor.cable_modem_downstream_21_snr
      - sensor.cable_modem_downstream_22_snr
      - sensor.cable_modem_downstream_23_snr
      - sensor.cable_modem_downstream_24_snr
      - sensor.cable_modem_downstream_25_snr
      - sensor.cable_modem_downstream_26_snr
      - sensor.cable_modem_downstream_27_snr
      - sensor.cable_modem_downstream_28_snr
      - sensor.cable_modem_downstream_29_snr
      - sensor.cable_modem_downstream_30_snr
      - sensor.cable_modem_downstream_31_snr
      - sensor.cable_modem_downstream_32_snr
      - sensor.cable_modem_downstream_33_snr
  - platform: min_max
    name: "Cable Modem Downstream Avg Corrected"
    type: mean
    entity_ids:
      - sensor.cable_modem_downstream_1_corrected
      - sensor.cable_modem_downstream_2_corrected
      - sensor.cable_modem_downstream_3_corrected
      - sensor.cable_modem_downstream_4_corrected
      - sensor.cable_modem_downstream_5_corrected
      - sensor.cable_modem_downstream_6_corrected
      - sensor.cable_modem_downstream_7_corrected
      - sensor.cable_modem_downstream_8_corrected
      - sensor.cable_modem_downstream_9_corrected
      - sensor.cable_modem_downstream_10_corrected
      - sensor.cable_modem_downstream_11_corrected
      - sensor.cable_modem_downstream_12_corrected
      - sensor.cable_modem_downstream_13_corrected
      - sensor.cable_modem_downstream_14_corrected
      - sensor.cable_modem_downstream_15_corrected
      - sensor.cable_modem_downstream_16_corrected
      - sensor.cable_modem_downstream_17_corrected
      - sensor.cable_modem_downstream_18_corrected
      - sensor.cable_modem_downstream_19_corrected
      - sensor.cable_modem_downstream_20_corrected
      - sensor.cable_modem_downstream_21_corrected
      - sensor.cable_modem_downstream_22_corrected
      - sensor.cable_modem_downstream_23_corrected
      - sensor.cable_modem_downstream_24_corrected
      - sensor.cable_modem_downstream_25_corrected
      - sensor.cable_modem_downstream_26_corrected
      - sensor.cable_modem_downstream_27_corrected
      - sensor.cable_modem_downstream_28_corrected
      - sensor.cable_modem_downstream_29_corrected
      - sensor.cable_modem_downstream_30_corrected
      - sensor.cable_modem_downstream_31_corrected
      - sensor.cable_modem_downstream_32_corrected
      - sensor.cable_modem_downstream_33_corrected
  - platform: min_max
    name: "Cable Modem Downstream Avg Uncorrectable"
    type: mean
    entity_ids:
      - sensor.cable_modem_downstream_1_uncorrectable
      - sensor.cable_modem_downstream_2_uncorrectable
      - sensor.cable_modem_downstream_3_uncorrectable
      - sensor.cable_modem_downstream_4_uncorrectable
      - sensor.cable_modem_downstream_5_uncorrectable
      - sensor.cable_modem_downstream_6_uncorrectable
      - sensor.cable_modem_downstream_7_uncorrectable
      - sensor.cable_modem_downstream_8_uncorrectable
      - sensor.cable_modem_downstream_9_uncorrectable
      - sensor.cable_modem_downstream_10_uncorrectable
      - sensor.cable_modem_downstream_11_uncorrectable
      - sensor.cable_modem_downstream_12_uncorrectable
      - sensor.cable_modem_downstream_13_uncorrectable
      - sensor.cable_modem_downstream_14_uncorrectable
      - sensor.cable_modem_downstream_15_uncorrectable
      - sensor.cable_modem_downstream_16_uncorrectable
      - sensor.cable_modem_downstream_17_uncorrectable
      - sensor.cable_modem_downstream_18_uncorrectable
      - sensor.cable_modem_downstream_19_uncorrectable
      - sensor.cable_modem_downstream_20_uncorrectable
      - sensor.cable_modem_downstream_21_uncorrectable
      - sensor.cable_modem_downstream_22_uncorrectable
      - sensor.cable_modem_downstream_23_uncorrectable
      - sensor.cable_modem_downstream_24_uncorrectable
      - sensor.cable_modem_downstream_25_uncorrectable
      - sensor.cable_modem_downstream_26_uncorrectable
      - sensor.cable_modem_downstream_27_uncorrectable
      - sensor.cable_modem_downstream_28_uncorrectable
      - sensor.cable_modem_downstream_29_uncorrectable
      - sensor.cable_modem_downstream_30_uncorrectable
      - sensor.cable_modem_downstream_31_uncorrectable
      - sensor.cable_modem_downstream_32_uncorrectable
      - sensor.cable_modem_downstream_33_uncorrectable

  # Minimums
  - platform: min_max
    name: "Cable Modem Downstream Min Power"
    type: min
    entity_ids:
      - sensor.cable_modem_downstream_1_power
      - sensor.cable_modem_downstream_2_power
      - sensor.cable_modem_downstream_3_power
      - sensor.cable_modem_downstream_4_power
      - sensor.cable_modem_downstream_5_power
      - sensor.cable_modem_downstream_6_power
      - sensor.cable_modem_downstream_7_power
      - sensor.cable_modem_downstream_8_power
      - sensor.cable_modem_downstream_9_power
      - sensor.cable_modem_downstream_10_power
      - sensor.cable_modem_downstream_11_power
      - sensor.cable_modem_downstream_12_power
      - sensor.cable_modem_downstream_13_power
      - sensor.cable_modem_downstream_14_power
      - sensor.cable_modem_downstream_15_power
      - sensor.cable_modem_downstream_16_power
      - sensor.cable_modem_downstream_17_power
      - sensor.cable_modem_downstream_18_power
      - sensor.cable_modem_downstream_19_power
      - sensor.cable_modem_downstream_20_power
      - sensor.cable_modem_downstream_21_power
      - sensor.cable_modem_downstream_22_power
      - sensor.cable_modem_downstream_23_power
      - sensor.cable_modem_downstream_24_power
      - sensor.cable_modem_downstream_25_power
      - sensor.cable_modem_downstream_26_power
      - sensor.cable_modem_downstream_27_power
      - sensor.cable_modem_downstream_28_power
      - sensor.cable_modem_downstream_29_power
      - sensor.cable_modem_downstream_30_power
      - sensor.cable_modem_downstream_31_power
      - sensor.cable_modem_downstream_32_power
      - sensor.cable_modem_downstream_33_power
  - platform: min_max
    name: "Cable Modem Downstream Min SNR"
    type: min
    entity_ids:
      - sensor.cable_modem_downstream_1_snr
      - sensor.cable_modem_downstream_2_snr
      - sensor.cable_modem_downstream_3_snr
      - sensor.cable_modem_downstream_4_snr
      - sensor.cable_modem_downstream_5_snr
      - sensor.cable_modem_downstream_6_snr
      - sensor.cable_modem_downstream_7_snr
      - sensor.cable_modem_downstream_8_snr
      - sensor.cable_modem_downstream_9_snr
      - sensor.cable_modem_downstream_10_snr
      - sensor.cable_modem_downstream_11_snr
      - sensor.cable_modem_downstream_12_snr
      - sensor.cable_modem_downstream_13_snr
      - sensor.cable_modem_downstream_14_snr
      - sensor.cable_modem_downstream_15_snr
      - sensor.cable_modem_downstream_16_snr
      - sensor.cable_modem_downstream_17_snr
      - sensor.cable_modem_downstream_18_snr
      - sensor.cable_modem_downstream_19_snr
      - sensor.cable_modem_downstream_20_snr
      - sensor.cable_modem_downstream_21_snr
      - sensor.cable_modem_downstream_22_snr
      - sensor.cable_modem_downstream_23_snr
      - sensor.cable_modem_downstream_24_snr
      - sensor.cable_modem_downstream_25_snr
      - sensor.cable_modem_downstream_26_snr
      - sensor.cable_modem_downstream_27_snr
      - sensor.cable_modem_downstream_28_snr
      - sensor.cable_modem_downstream_29_snr
      - sensor.cable_modem_downstream_30_snr
      - sensor.cable_modem_downstream_31_snr
      - sensor.cable_modem_downstream_32_snr
      - sensor.cable_modem_downstream_33_snr
  - platform: min_max
    name: "Cable Modem Downstream Min Corrected"
    type: min
    entity_ids:
      - sensor.cable_modem_downstream_1_corrected
      - sensor.cable_modem_downstream_2_corrected
      - sensor.cable_modem_downstream_3_corrected
      - sensor.cable_modem_downstream_4_corrected
      - sensor.cable_modem_downstream_5_corrected
      - sensor.cable_modem_downstream_6_corrected
      - sensor.cable_modem_downstream_7_corrected
      - sensor.cable_modem_downstream_8_corrected
      - sensor.cable_modem_downstream_9_corrected
      - sensor.cable_modem_downstream_10_corrected
      - sensor.cable_modem_downstream_11_corrected
      - sensor.cable_modem_downstream_12_corrected
      - sensor.cable_modem_downstream_13_corrected
      - sensor.cable_modem_downstream_14_corrected
      - sensor.cable_modem_downstream_15_corrected
      - sensor.cable_modem_downstream_16_corrected
      - sensor.cable_modem_downstream_17_corrected
      - sensor.cable_modem_downstream_18_corrected
      - sensor.cable_modem_downstream_19_corrected
      - sensor.cable_modem_downstream_20_corrected
      - sensor.cable_modem_downstream_21_corrected
      - sensor.cable_modem_downstream_22_corrected
      - sensor.cable_modem_downstream_23_corrected
      - sensor.cable_modem_downstream_24_corrected
      - sensor.cable_modem_downstream_25_corrected
      - sensor.cable_modem_downstream_26_corrected
      - sensor.cable_modem_downstream_27_corrected
      - sensor.cable_modem_downstream_28_corrected
      - sensor.cable_modem_downstream_29_corrected
      - sensor.cable_modem_downstream_30_corrected
      - sensor.cable_modem_downstream_31_corrected
      - sensor.cable_modem_downstream_32_corrected
      - sensor.cable_modem_downstream_33_corrected
  - platform: min_max
    name: "Cable Modem Downstream Min Uncorrectable"
    type: min
    entity_ids:
      - sensor.cable_modem_downstream_1_uncorrectable
      - sensor.cable_modem_downstream_2_uncorrectable
      - sensor.cable_modem_downstream_3_uncorrectable
      - sensor.cable_modem_downstream_4_uncorrectable
      - sensor.cable_modem_downstream_5_uncorrectable
      - sensor.cable_modem_downstream_6_uncorrectable
      - sensor.cable_modem_downstream_7_uncorrectable
      - sensor.cable_modem_downstream_8_uncorrectable
      - sensor.cable_modem_downstream_9_uncorrectable
      - sensor.cable_modem_downstream_10_uncorrectable
      - sensor.cable_modem_downstream_11_uncorrectable
      - sensor.cable_modem_downstream_12_uncorrectable
      - sensor.cable_modem_downstream_13_uncorrectable
      - sensor.cable_modem_downstream_14_uncorrectable
      - sensor.cable_modem_downstream_15_uncorrectable
      - sensor.cable_modem_downstream_16_uncorrectable
      - sensor.cable_modem_downstream_17_uncorrectable
      - sensor.cable_modem_downstream_18_uncorrectable
      - sensor.cable_modem_downstream_19_uncorrectable
      - sensor.cable_modem_downstream_20_uncorrectable
      - sensor.cable_modem_downstream_21_uncorrectable
      - sensor.cable_modem_downstream_22_uncorrectable
      - sensor.cable_modem_downstream_23_uncorrectable
      - sensor.cable_modem_downstream_24_uncorrectable
      - sensor.cable_modem_downstream_25_uncorrectable
      - sensor.cable_modem_downstream_26_uncorrectable
      - sensor.cable_modem_downstream_27_uncorrectable
      - sensor.cable_modem_downstream_28_uncorrectable
      - sensor.cable_modem_downstream_29_uncorrectable
      - sensor.cable_modem_downstream_30_uncorrectable
      - sensor.cable_modem_downstream_31_uncorrectable
      - sensor.cable_modem_downstream_32_uncorrectable
      - sensor.cable_modem_downstream_33_uncorrectable

  # Maximums
  - platform: min_max
    name: "Cable Modem Downstream Max Power"
    type: max
    entity_ids:
      - sensor.cable_modem_downstream_1_power
      - sensor.cable_modem_downstream_2_power
      - sensor.cable_modem_downstream_3_power
      - sensor.cable_modem_downstream_4_power
      - sensor.cable_modem_downstream_5_power
      - sensor.cable_modem_downstream_6_power
      - sensor.cable_modem_downstream_7_power
      - sensor.cable_modem_downstream_8_power
      - sensor.cable_modem_downstream_9_power
      - sensor.cable_modem_downstream_10_power
      - sensor.cable_modem_downstream_11_power
      - sensor.cable_modem_downstream_12_power
      - sensor.cable_modem_downstream_13_power
      - sensor.cable_modem_downstream_14_power
      - sensor.cable_modem_downstream_15_power
      - sensor.cable_modem_downstream_16_power
      - sensor.cable_modem_downstream_17_power
      - sensor.cable_modem_downstream_18_power
      - sensor.cable_modem_downstream_19_power
      - sensor.cable_modem_downstream_20_power
      - sensor.cable_modem_downstream_21_power
      - sensor.cable_modem_downstream_22_power
      - sensor.cable_modem_downstream_23_power
      - sensor.cable_modem_downstream_24_power
      - sensor.cable_modem_downstream_25_power
      - sensor.cable_modem_downstream_26_power
      - sensor.cable_modem_downstream_27_power
      - sensor.cable_modem_downstream_28_power
      - sensor.cable_modem_downstream_29_power
      - sensor.cable_modem_downstream_30_power
      - sensor.cable_modem_downstream_31_power
      - sensor.cable_modem_downstream_32_power
      - sensor.cable_modem_downstream_33_power
  - platform: min_max
    name: "Cable Modem Downstream Max SNR"
    type: max
    entity_ids:
      - sensor.cable_modem_downstream_1_snr
      - sensor.cable_modem_downstream_2_snr
      - sensor.cable_modem_downstream_3_snr
      - sensor.cable_modem_downstream_4_snr
      - sensor.cable_modem_downstream_5_snr
      - sensor.cable_modem_downstream_6_snr
      - sensor.cable_modem_downstream_7_snr
      - sensor.cable_modem_downstream_8_snr
      - sensor.cable_modem_downstream_9_snr
      - sensor.cable_modem_downstream_10_snr
      - sensor.cable_modem_downstream_11_snr
      - sensor.cable_modem_downstream_12_snr
      - sensor.cable_modem_downstream_13_snr
      - sensor.cable_modem_downstream_14_snr
      - sensor.cable_modem_downstream_15_snr
      - sensor.cable_modem_downstream_16_snr
      - sensor.cable_modem_downstream_17_snr
      - sensor.cable_modem_downstream_18_snr
      - sensor.cable_modem_downstream_19_snr
      - sensor.cable_modem_downstream_20_snr
      - sensor.cable_modem_downstream_21_snr
      - sensor.cable_modem_downstream_22_snr
      - sensor.cable_modem_downstream_23_snr
      - sensor.cable_modem_downstream_24_snr
      - sensor.cable_modem_downstream_25_snr
      - sensor.cable_modem_downstream_26_snr
      - sensor.cable_modem_downstream_27_snr
      - sensor.cable_modem_downstream_28_snr
      - sensor.cable_modem_downstream_29_snr
      - sensor.cable_modem_downstream_30_snr
      - sensor.cable_modem_downstream_31_snr
      - sensor.cable_modem_downstream_32_snr
      - sensor.cable_modem_downstream_33_snr
  - platform: min_max
    name: "Cable Modem Downstream Max Corrected"
    type: max
    entity_ids:
      - sensor.cable_modem_downstream_1_corrected
      - sensor.cable_modem_downstream_2_corrected
      - sensor.cable_modem_downstream_3_corrected
      - sensor.cable_modem_downstream_4_corrected
      - sensor.cable_modem_downstream_5_corrected
      - sensor.cable_modem_downstream_6_corrected
      - sensor.cable_modem_downstream_7_corrected
      - sensor.cable_modem_downstream_8_corrected
      - sensor.cable_modem_downstream_9_corrected
      - sensor.cable_modem_downstream_10_corrected
      - sensor.cable_modem_downstream_11_corrected
      - sensor.cable_modem_downstream_12_corrected
      - sensor.cable_modem_downstream_13_corrected
      - sensor.cable_modem_downstream_14_corrected
      - sensor.cable_modem_downstream_15_corrected
      - sensor.cable_modem_downstream_16_corrected
      - sensor.cable_modem_downstream_17_corrected
      - sensor.cable_modem_downstream_18_corrected
      - sensor.cable_modem_downstream_19_corrected
      - sensor.cable_modem_downstream_20_corrected
      - sensor.cable_modem_downstream_21_corrected
      - sensor.cable_modem_downstream_22_corrected
      - sensor.cable_modem_downstream_23_corrected
      - sensor.cable_modem_downstream_24_corrected
      - sensor.cable_modem_downstream_25_corrected
      - sensor.cable_modem_downstream_26_corrected
      - sensor.cable_modem_downstream_27_corrected
      - sensor.cable_modem_downstream_28_corrected
      - sensor.cable_modem_downstream_29_corrected
      - sensor.cable_modem_downstream_30_corrected
      - sensor.cable_modem_downstream_31_corrected
      - sensor.cable_modem_downstream_32_corrected
      - sensor.cable_modem_downstream_33_corrected
  - platform: min_max
    name: "Cable Modem Downstream Max Uncorrectable"
    type: max
    entity_ids:
      - sensor.cable_modem_downstream_1_uncorrectable
      - sensor.cable_modem_downstream_2_uncorrectable
      - sensor.cable_modem_downstream_3_uncorrectable
      - sensor.cable_modem_downstream_4_uncorrectable
      - sensor.cable_modem_downstream_5_uncorrectable
      - sensor.cable_modem_downstream_6_uncorrectable
      - sensor.cable_modem_downstream_7_uncorrectable
      - sensor.cable_modem_downstream_8_uncorrectable
      - sensor.cable_modem_downstream_9_uncorrectable
      - sensor.cable_modem_downstream_10_uncorrectable
      - sensor.cable_modem_downstream_11_uncorrectable
      - sensor.cable_modem_downstream_12_uncorrectable
      - sensor.cable_modem_downstream_13_uncorrectable
      - sensor.cable_modem_downstream_14_uncorrectable
      - sensor.cable_modem_downstream_15_uncorrectable
      - sensor.cable_modem_downstream_16_uncorrectable
      - sensor.cable_modem_downstream_17_uncorrectable
      - sensor.cable_modem_downstream_18_uncorrectable
      - sensor.cable_modem_downstream_19_uncorrectable
      - sensor.cable_modem_downstream_20_uncorrectable
      - sensor.cable_modem_downstream_21_uncorrectable
      - sensor.cable_modem_downstream_22_uncorrectable
      - sensor.cable_modem_downstream_23_uncorrectable
      - sensor.cable_modem_downstream_24_uncorrectable
      - sensor.cable_modem_downstream_25_uncorrectable
      - sensor.cable_modem_downstream_26_uncorrectable
      - sensor.cable_modem_downstream_27_uncorrectable
      - sensor.cable_modem_downstream_28_uncorrectable
      - sensor.cable_modem_downstream_29_uncorrectable
      - sensor.cable_modem_downstream_30_uncorrectable
      - sensor.cable_modem_downstream_31_uncorrectable
      - sensor.cable_modem_downstream_32_uncorrectable
      - sensor.cable_modem_downstream_33_uncorrectable



  ###########
  # Upstream
  ###########

  # MQTT Inputs
  - platform: mqtt
    name: "Cable Modem Upstream 1 Power"
    unique_id: "cable_modem_upstream_1_power"
    state_topic: "homeassistant/sensor/modemsignals/upstream/1"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/upstream/1"

  - platform: mqtt
    name: "Cable Modem Upstream 2 Power"
    unique_id: "cable_modem_upstream_2_power"
    state_topic: "homeassistant/sensor/modemsignals/upstream/2"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/upstream/2"

  - platform: mqtt
    name: "Cable Modem Upstream 3 Power"
    unique_id: "cable_modem_upstream_3_power"
    state_topic: "homeassistant/sensor/modemsignals/upstream/3"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/upstream/3"

  - platform: mqtt
    name: "Cable Modem Upstream 4 Power"
    unique_id: "cable_modem_upstream_4_power"
    state_topic: "homeassistant/sensor/modemsignals/upstream/4"
    unit_of_measurement: 'dBmV'
    value_template: "{{ value_json.Power }}"
    json_attributes_topic: "homeassistant/sensor/modemsignals/upstream/4"

  # Averages
  - platform: min_max
    name: "Cable Modem Upstream Avg Power"
    type: mean
    entity_ids:
      - sensor.cable_modem_upstream_1_power
      - sensor.cable_modem_upstream_2_power
      - sensor.cable_modem_upstream_3_power
      - sensor.cable_modem_upstream_4_power

  # Minimums
  - platform: min_max
    name: "Cable Modem Upstream Min Power"
    type: min
    entity_ids:
      - sensor.cable_modem_upstream_1_power
      - sensor.cable_modem_upstream_2_power
      - sensor.cable_modem_upstream_3_power
      - sensor.cable_modem_upstream_4_power

  # Maximums
  - platform: min_max
    name: "Cable Modem Upstream Max Power"
    type: max
    entity_ids:
      - sensor.cable_modem_upstream_1_power
      - sensor.cable_modem_upstream_2_power
      - sensor.cable_modem_upstream_3_power
      - sensor.cable_modem_upstream_4_power

